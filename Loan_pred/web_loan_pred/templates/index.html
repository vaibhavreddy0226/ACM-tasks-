<!DOCTYPE html>
<html>
<head>
    <title>Loan Approval Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<h1>üè¶ Loan Approval Prediction System</h1>

{% if error_message %}
    <div class="error-message">
        <h3>‚ö†Ô∏è Error: {{ error_message }}</h3>
    </div>
{% endif %}

<form action="/predict" method="post">
    <div class="form-group">
        <select name="Gender" required>
            <option value="" disabled {% if not gender %}selected{% endif %}>Select Gender</option>
            <option value="Male" {% if gender == 'Male' %}selected{% endif %}>Male</option>
            <option value="Female" {% if gender == 'Female' %}selected{% endif %}>Female</option>
        </select>

        <select name="Married" required>
            <option value="" disabled {% if not married %}selected{% endif %}>Married?</option>
            <option value="Yes" {% if married == 'Yes' %}selected{% endif %}>Yes</option>
            <option value="No" {% if married == 'No' %}selected{% endif %}>No</option>
        </select>

        <select name="Dependents" required>
            <option value="" disabled {% if not dependents %}selected{% endif %}>Dependents</option>
            <option value="0" {% if dependents == '0' %}selected{% endif %}>0</option>
            <option value="1" {% if dependents == '1' %}selected{% endif %}>1</option>
            <option value="2" {% if dependents == '2' %}selected{% endif %}>2</option>
            <option value="3+" {% if dependents == '3+' %}selected{% endif %}>3+</option>
        </select>

        <select name="Education" required>
            <option value="" disabled {% if not education %}selected{% endif %}>Education</option>
            <option value="Graduate" {% if education == 'Graduate' %}selected{% endif %}>Graduate</option>
            <option value="Not Graduate" {% if education == 'Not Graduate' %}selected{% endif %}>Not Graduate</option>
        </select>

        <select name="Self_Employed" required>
            <option value="" disabled {% if not self_employed %}selected{% endif %}>Self Employed?</option>
            <option value="Yes" {% if self_employed == 'Yes' %}selected{% endif %}>Yes</option>
            <option value="No" {% if self_employed == 'No' %}selected{% endif %}>No</option>
        </select>

        <input type="number" name="ApplicantIncome" placeholder="Applicant Income (‚Çπ)" required min="0" step="any" value="{{ applicant_income or '' }}">
        <input type="number" name="CoapplicantIncome" placeholder="Coapplicant Income (‚Çπ)" required min="0" step="any" value="{{ coapplicant_income or '0' }}">
        <input type="number" name="LoanAmount" placeholder="Loan Amount (‚Çπ)" required min="1" step="any" value="{{ loan_amount or '' }}">
        <input type="number" name="Loan_Amount_Term" placeholder="Loan Term (months)" required min="12" value="{{ loan_term or '360' }}">

        <select name="Credit_History" required>
            <option value="" disabled {% if not credit_history %}selected{% endif %}>Credit History</option>
            <option value="1" {% if credit_history == 1.0 %}selected{% endif %}>Good (1)</option>
            <option value="0" {% if credit_history == 0.0 %}selected{% endif %}>Bad (0)</option>
        </select>

        <select name="Property_Area" required>
            <option value="" disabled {% if not property_area %}selected{% endif %}>Property Area</option>
            <option value="Urban" {% if property_area == 'Urban' %}selected{% endif %}>Urban</option>
            <option value="Semiurban" {% if property_area == 'Semiurban' %}selected{% endif %}>Semiurban</option>
            <option value="Rural" {% if property_area == 'Rural' %}selected{% endif %}>Rural</option>
        </select>

        <button type="submit">üîç Predict Loan Approval</button>
    </div>
</form>

{% if lr_status %}
<div class="results">
    <div class="card {% if lr_status == 'Approved' %}approved{% else %}rejected{% endif %}">
        <h2>üìä Logistic Regression</h2>
        <p class="status">Status: <b>{{ lr_status }}</b></p>
        <p>Approval Probability: <b>{{ lr_prob }}%</b></p>
    </div>

    <div class="card {% if rf_status == 'Approved' %}approved{% else %}rejected{% endif %}">
        <h2>üå≤ Random Forest</h2>
        <p class="status">Status: <b>{{ rf_status }}</b></p>
        <p>Approval Probability: <b>{{ rf_prob }}%</b></p>
    </div>
</div>
{% endif %}

</body>
</html>
